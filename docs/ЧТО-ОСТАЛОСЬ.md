# Что осталось сделать — Relaxe Drive

## Уже сделано
- Репозиторий на GitHub, код запушен
- Blueprint на Render: база **relaxdrive-db** и сервис **relaxdrive-api** создаются/деплоятся

---

## 1. Дождаться деплоя на Render
- В Blueprint дождись, пока **relaxdrive-db** и **relaxdrive-api** станут зелёными (Succeeded).
- Если что-то упадёт с ошибкой — открой сервис → **Logs** и пришли текст ошибки.

---

## 2. Проверить CORS (если API будет ругаться на запросы с браузера)
В Render у сервиса **relaxdrive-api** в **Environment** переменная **CORS_ORIGINS** сейчас задана в `render.yaml` как:
`https://your-frontend.onrender.com,https://your-domain.com`

- Пока фронта нет — можно поставить `*` (только для теста).
- Или в Dashboard сервиса **relaxdrive-api** → **Environment** → изменить **CORS_ORIGINS** на `*` и сделать **Manual Deploy**.

---

## 3. Создать админа (один раз после деплоя)
Чтобы войти в систему, нужно один раз выполнить seed.

**Через Render Shell (проще):**
1. В Render открой сервис **relaxdrive-api** → **Shell**.
2. В консоли выполни: `npm run prisma:seed`
3. Должно появиться: `Admin user ready: nickname = Admin`

**Логин:** `Admin` / **Пароль:** `Luka1Soso`

Подробно: раздел «Шаг 4» в [DEPLOY-RENDER.md](./DEPLOY-RENDER.md).

---

## 4. Проверить API
- URL API будет вида: `https://relaxdrive-api.onrender.com` (посмотри в карточке сервиса).
- В браузере открой: `https://ТВОЙ-URL/health` — должен вернуться JSON (ok).
- Логин: Postman или фронт — `POST /auth/login` с телом `{"nickname":"Admin","password":"Luka1Soso"}`.

---

## 5. (По желанию) Задеплоить веб-фронт на Render
Чтобы открывать дашборд в браузере не только локально:

1. Render → **New** → **Static Site**.
2. Репозиторий тот же (**Relaxe_Drive**), **Root Directory**: `web`.
3. **Build Command:** `npm install && npm run build`
4. **Publish Directory:** `dist`
5. В **Environment** добавь:
   - `VITE_API_URL` = `https://relaxdrive-api.onrender.com` (твой URL API)
   - `VITE_WS_URL` = `https://relaxdrive-api.onrender.com`
6. В сервисе **relaxdrive-api** в **CORS_ORIGINS** добавь URL этого статического сайта (например `https://relaxdrive-web.onrender.com`) и сделай **Manual Deploy**.

После этого дашборд будет доступен по ссылке статического сайта.

---

## 6. (По желанию) Локально подключить веб к прод API
Если хочешь запускать фронт у себя, но чтобы он ходил на API на Render:

В папке **web** создай `.env`:
```env
VITE_API_URL=https://relaxdrive-api.onrender.com
VITE_WS_URL=https://relaxdrive-api.onrender.com
```
И в **relaxdrive-api** в CORS добавь `http://localhost:5173` (или URL, с которого открываешь фронт).

---

## Краткий чек-лист
- [ ] Дождаться успешного деплоя relaxdrive-db и relaxdrive-api
- [ ] При необходимости поставить CORS_ORIGINS = `*` для теста
- [ ] Выполнить seed (Shell: `npm run prisma:seed`)
- [ ] Проверить `/health` и логин
- [ ] (Опционально) Задеплоить Static Site для веб-фронта и прописать CORS

Дальше можно пользоваться API, веб-дашбордом (если задеплоил) и десктопным приложением (локально, указав URL API в конфиге).
